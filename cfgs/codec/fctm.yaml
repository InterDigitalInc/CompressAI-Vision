type: "fctm"
eval_encode: "bitrate" # or "bpp"
experiment: "" # e.g. "_preset_medium" name experiment preceded by "_"
output_dir: "${pipeline.output_dir_root}/${.type}${.experiment}/${dataset.datacatalog}/${dataset.config.dataset_name}/qp${codec.tools.inner_codec.enc_configs.qp}"
bitstream_name: "${dataset.config.dataset_name}_qp${codec.tools.inner_codec.enc_configs.qp}"

#============================== Configuration below are the same with fctm.yaml in FCTM =========================================
# NOTE: Configuration below can always be replaced with the latest fctm.yaml in FCTM if there are any incompatiable issues

verbosity: 0

coding_behaviour: "all"
device: "cpu"

enc_configs:
  qp: 27
  frame_rate: 30
  intra_period: 1
  n_bit: 10
  cfg_file: "/pa/projects/etl-vcm/fcvcm/vtm-12.0/cfg/encoder_intra_vtm.cfg"
  parallel_encoding: False # std inner codec parallel option

tools:
  feature_reduction:
    m65705: # Faster & Mask R-CNN working at fpn split
      enabled: True
      task: "obj" # or "seg"
    m65181: # YOLOv3 JDE
      enabled: False
      split_point: "ALT1" # or "DN53"

  feature_restoration:
    m65705: # R-CNN
      enabled: ${codec.tools.feature_reduction.m65705.enabled}
      task: ${codec.tools.feature_reduction.m65705.task}
    m65181: # YOLOv3 JDE
      enabled: ${codec.tools.feature_reduction.m65181.enabled}
      split_point: ${codec.tools.feature_reduction.m65181.split_point}

  conversion:
    bypass: False
    n_bit: ${codec.enc_configs.n_bit}
    packing:
      channels_in_width: -1
      channels_in_height: -1

  inner_codec:
    type: 'vtm'
    stash_outputs: True
    enc_configs: ${codec.enc_configs}
    enc_exe: "/pa/projects/etl-vcm/fcvcm/vtm-12.0/bin/EncoderAppStatic"
    dec_exe: "/pa/projects/etl-vcm/fcvcm/vtm-12.0/bin/DecoderAppStatic"
    merge_exe: "/pa/projects/etl-vcm/fcvcm/vtm-12.0/bin/parcatStatic"
